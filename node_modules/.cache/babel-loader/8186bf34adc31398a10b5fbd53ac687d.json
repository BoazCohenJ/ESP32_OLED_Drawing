{"ast":null,"code":"import React from 'react';\nimport { getCoordinates, drawLine } from './utils';\nconst FreeformMode = ({\n  isActive,\n  onPixelUpdate,\n  brushSize,\n  drawColor = true\n}) => {\n  const handleDraw = (lastPoint, currentIndex) => {\n    const currentPoint = getCoordinates(currentIndex);\n    if (lastPoint) {\n      const pointsToDraw = [];\n      drawLine(lastPoint, currentPoint).forEach(idx => {\n        pointsToDraw.push(idx);\n        const centerX = idx % 128;\n        const centerY = Math.floor(idx / 128);\n        for (let offset = 0; offset < brushSize; offset++) {\n          for (let i = -offset; i <= offset; i++) {\n            const points = [{\n              x: centerX + i,\n              y: centerY - (brushSize - 1 - offset)\n            }, {\n              x: centerX + i,\n              y: centerY + (brushSize - 1 - offset)\n            }, {\n              x: centerX - (brushSize - 1 - offset),\n              y: centerY + i\n            }, {\n              x: centerX + (brushSize - 1 - offset),\n              y: centerY + i\n            }];\n            points.forEach(point => {\n              if (point.x >= 0 && point.x < 128 && point.y >= 0 && point.y < 64) {\n                const newIdx = point.y * 128 + point.x;\n                pointsToDraw.push(newIdx);\n              }\n            });\n          }\n        }\n      });\n      onPixelUpdate(prev => {\n        const newPixels = [...prev];\n        pointsToDraw.forEach(idx => {\n          newPixels[idx] = drawColor;\n        });\n        return newPixels;\n      });\n    }\n    return currentPoint;\n  };\n  const handleStart = index => {\n    const pointsToDraw = [];\n    const centerX = index % 128;\n    const centerY = Math.floor(index / 128);\n    for (let offset = 0; offset < brushSize; offset++) {\n      for (let i = -offset; i <= offset; i++) {\n        const points = [{\n          x: centerX + i,\n          y: centerY - (brushSize - 1 - offset)\n        }, {\n          x: centerX + i,\n          y: centerY + (brushSize - 1 - offset)\n        }, {\n          x: centerX - (brushSize - 1 - offset),\n          y: centerY + i\n        }, {\n          x: centerX + (brushSize - 1 - offset),\n          y: centerY + i\n        }];\n        points.forEach(point => {\n          if (point.x >= 0 && point.x < 128 && point.y >= 0 && point.y < 64) {\n            const newIdx = point.y * 128 + point.x;\n            pointsToDraw.push(newIdx);\n          }\n        });\n      }\n    }\n    onPixelUpdate(prev => {\n      const newPixels = [...prev];\n      pointsToDraw.forEach(idx => {\n        newPixels[idx] = drawColor;\n      });\n      return newPixels;\n    });\n  };\n  return {\n    handleDraw,\n    handleStart,\n    modeName: 'Freeform Mode',\n    isActive\n  };\n};\n_c = FreeformMode;\nexport default FreeformMode;\nvar _c;\n$RefreshReg$(_c, \"FreeformMode\");","map":{"version":3,"names":["React","getCoordinates","drawLine","FreeformMode","isActive","onPixelUpdate","brushSize","drawColor","handleDraw","lastPoint","currentIndex","currentPoint","pointsToDraw","forEach","idx","push","centerX","centerY","Math","floor","offset","i","points","x","y","point","newIdx","prev","newPixels","handleStart","index","modeName","_c","$RefreshReg$"],"sources":["C:/Users/wikx3/Documents/VS_code/React/AOD/src/components/pixelGrid/FreeFormMode.jsx"],"sourcesContent":["import React from 'react';\r\nimport { getCoordinates, drawLine } from './utils';\r\n\r\nconst FreeformMode = ({ isActive, onPixelUpdate, brushSize, drawColor = true }) => {\r\n  const handleDraw = (lastPoint, currentIndex) => {\r\n    const currentPoint = getCoordinates(currentIndex);\r\n    if (lastPoint) {\r\n      const pointsToDraw = [];\r\n      drawLine(lastPoint, currentPoint).forEach(idx => {\r\n        pointsToDraw.push(idx);\r\n        const centerX = idx % 128;\r\n        const centerY = Math.floor(idx / 128);\r\n        for (let offset = 0; offset < brushSize; offset++) {\r\n          for (let i = -offset; i <= offset; i++) {\r\n            const points = [\r\n              { x: centerX + i, y: centerY - (brushSize - 1 - offset) },\r\n              { x: centerX + i, y: centerY + (brushSize - 1 - offset) },\r\n              { x: centerX - (brushSize - 1 - offset), y: centerY + i },\r\n              { x: centerX + (brushSize - 1 - offset), y: centerY + i }\r\n            ];\r\n            points.forEach(point => {\r\n              if (point.x >= 0 && point.x < 128 && point.y >= 0 && point.y < 64) {\r\n                const newIdx = point.y * 128 + point.x;\r\n                pointsToDraw.push(newIdx);\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      onPixelUpdate(prev => {\r\n        const newPixels = [...prev];\r\n        pointsToDraw.forEach(idx => {\r\n          newPixels[idx] = drawColor;\r\n        });\r\n        return newPixels;\r\n      });\r\n    }\r\n    return currentPoint;\r\n  };\r\n\r\n  const handleStart = (index) => {\r\n    const pointsToDraw = [];\r\n    const centerX = index % 128;\r\n    const centerY = Math.floor(index / 128);\r\n    for (let offset = 0; offset < brushSize; offset++) {\r\n      for (let i = -offset; i <= offset; i++) {\r\n        const points = [\r\n          { x: centerX + i, y: centerY - (brushSize - 1 - offset) },\r\n          { x: centerX + i, y: centerY + (brushSize - 1 - offset) },\r\n          { x: centerX - (brushSize - 1 - offset), y: centerY + i },\r\n          { x: centerX + (brushSize - 1 - offset), y: centerY + i }\r\n        ];\r\n        points.forEach(point => {\r\n          if (point.x >= 0 && point.x < 128 && point.y >= 0 && point.y < 64) {\r\n            const newIdx = point.y * 128 + point.x;\r\n            pointsToDraw.push(newIdx);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    onPixelUpdate(prev => {\r\n      const newPixels = [...prev];\r\n      pointsToDraw.forEach(idx => {\r\n        newPixels[idx] = drawColor;\r\n      });\r\n      return newPixels;\r\n    });\r\n  };\r\n\r\n  return {\r\n    handleDraw,\r\n    handleStart,\r\n    modeName: 'Freeform Mode',\r\n    isActive\r\n  };\r\n};\r\n\r\nexport default FreeformMode;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}