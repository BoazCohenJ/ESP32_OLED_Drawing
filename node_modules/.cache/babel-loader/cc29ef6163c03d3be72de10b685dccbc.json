{"ast":null,"code":"import React from 'react';\nconst getCoordinates = index => ({\n  x: index % 128,\n  y: Math.floor(index / 128)\n});\nconst getIndex = (x, y) => y * 128 + x;\nconst drawCircle = (center, radius) => {\n  const points = [];\n  let x = radius;\n  let y = 0;\n  let error = 0;\n  while (x >= y) {\n    // Add points in all octants using the center\n    const coordinates = [[center.x + x, center.y + y], [center.x + y, center.y + x], [center.x - y, center.y + x], [center.x - x, center.y + y], [center.x - x, center.y - y], [center.x - y, center.y - x], [center.x + y, center.y - x], [center.x + x, center.y - y]];\n    coordinates.forEach(([px, py]) => {\n      if (px >= 0 && px < 128 && py >= 0 && py < 64) {\n        const index = getIndex(px, py);\n        if (index >= 0 && index < 8192) {\n          points.push(index);\n        }\n      }\n    });\n    y++;\n    error += 1 + 2 * y;\n    if (2 * (error - x) + 1 > 0) {\n      x--;\n      error += 1 - 2 * x;\n    }\n  }\n  return points;\n};\nconst CircleMode = ({\n  isActive,\n  onPixelUpdate,\n  onPreviewUpdate\n}) => {\n  const updateCircle = (centerPoint, radius) => {\n    if (!centerPoint || typeof radius !== 'number') return;\n    const circlePoints = drawCircle(centerPoint, radius);\n    const newPreview = Array(8192).fill(false);\n    circlePoints.forEach(idx => {\n      newPreview[idx] = true;\n    });\n    return newPreview;\n  };\n  const handlePreview = (centerIndex, radius) => {\n    if (typeof centerIndex !== 'number' || typeof radius !== 'number') return;\n    const centerPoint = getCoordinates(centerIndex);\n    const previewState = updateCircle(centerPoint, radius);\n    onPreviewUpdate(() => previewState);\n  };\n  const handleCommit = (centerIndex, radius) => {\n    if (typeof centerIndex !== 'number' || typeof radius !== 'number') return;\n    const centerPoint = getCoordinates(centerIndex);\n    const circlePoints = drawCircle(centerPoint, radius);\n    onPixelUpdate(prev => {\n      const newPixels = [...prev];\n      circlePoints.forEach(idx => {\n        newPixels[idx] = true;\n      });\n      return newPixels;\n    });\n  };\n  return {\n    handlePreview,\n    handleCommit,\n    modeName: 'Circle Mode',\n    isActive\n  };\n};\n_c = CircleMode;\nexport default CircleMode;\nvar _c;\n$RefreshReg$(_c, \"CircleMode\");","map":{"version":3,"names":["React","getCoordinates","index","x","y","Math","floor","getIndex","drawCircle","center","radius","points","error","coordinates","forEach","px","py","push","CircleMode","isActive","onPixelUpdate","onPreviewUpdate","updateCircle","centerPoint","circlePoints","newPreview","Array","fill","idx","handlePreview","centerIndex","previewState","handleCommit","prev","newPixels","modeName","_c","$RefreshReg$"],"sources":["C:/Users/wikx3/Documents/VS_code/React/AOD/src/components/pixelGrid/CircleMode.jsx"],"sourcesContent":["import React from 'react';\r\n\r\nconst getCoordinates = (index) => ({\r\n    x: index % 128,\r\n    y: Math.floor(index / 128)\r\n});\r\n\r\nconst getIndex = (x, y) => y * 128 + x;\r\n\r\nconst drawCircle = (center, radius) => {\r\n    const points = [];\r\n\r\n    let x = radius;\r\n    let y = 0;\r\n    let error = 0;\r\n\r\n    while (x >= y) {\r\n        // Add points in all octants using the center\r\n        const coordinates = [\r\n            [center.x + x, center.y + y],\r\n            [center.x + y, center.y + x],\r\n            [center.x - y, center.y + x],\r\n            [center.x - x, center.y + y],\r\n            [center.x - x, center.y - y],\r\n            [center.x - y, center.y - x],\r\n            [center.x + y, center.y - x],\r\n            [center.x + x, center.y - y],\r\n        ];\r\n\r\n        coordinates.forEach(([px, py]) => {\r\n            if (px >= 0 && px < 128 && py >= 0 && py < 64) {\r\n                const index = getIndex(px, py);\r\n                if (index >= 0 && index < 8192) {\r\n                    points.push(index);\r\n                }\r\n            }\r\n        });\r\n\r\n        y++;\r\n        error += 1 + 2 * y;\r\n        if (2 * (error - x) + 1 > 0) {\r\n            x--;\r\n            error += 1 - 2 * x;\r\n        }\r\n    }\r\n\r\n    return points;\r\n};\r\n\r\nconst CircleMode = ({ isActive, onPixelUpdate, onPreviewUpdate }) => {\r\n    const updateCircle = (centerPoint, radius) => {\r\n        if (!centerPoint || typeof radius !== 'number') return;\r\n\r\n        const circlePoints = drawCircle(centerPoint, radius);\r\n        const newPreview = Array(8192).fill(false);\r\n        circlePoints.forEach(idx => {\r\n            newPreview[idx] = true;\r\n        });\r\n\r\n        return newPreview;\r\n    };\r\n\r\n    const handlePreview = (centerIndex, radius) => {\r\n        if (typeof centerIndex !== 'number' || typeof radius !== 'number') return;\r\n\r\n        const centerPoint = getCoordinates(centerIndex);\r\n        const previewState = updateCircle(centerPoint, radius);\r\n        onPreviewUpdate(() => previewState);\r\n    };\r\n\r\n    const handleCommit = (centerIndex, radius) => {\r\n        if (typeof centerIndex !== 'number' || typeof radius !== 'number') return;\r\n\r\n        const centerPoint = getCoordinates(centerIndex);\r\n        const circlePoints = drawCircle(centerPoint, radius);\r\n\r\n        onPixelUpdate(prev => {\r\n            const newPixels = [...prev];\r\n            circlePoints.forEach(idx => {\r\n                newPixels[idx] = true;\r\n            });\r\n            return newPixels;\r\n        });\r\n    };\r\n\r\n    return {\r\n        handlePreview,\r\n        handleCommit,\r\n        modeName: 'Circle Mode',\r\n        isActive\r\n    };\r\n};\r\n\r\nexport default CircleMode;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}