{"ast":null,"code":"import React from 'react';\nimport { getCoordinates, drawLine } from './utils';\nconst FreeformMode = ({\n  isActive,\n  onPixelUpdate,\n  brushSize\n}) => {\n  const handleDraw = (lastPoint, currentIndex) => {\n    const currentPoint = getCoordinates(currentIndex);\n    if (lastPoint) {\n      // Instead of updating pixels directly, return the points to draw\n      const pointsToDraw = [];\n      drawLine(lastPoint, currentPoint).forEach(idx => {\n        pointsToDraw.push(idx);\n        const centerX = idx % 128;\n        const centerY = Math.floor(idx / 128);\n\n        // Diamond pattern\n        for (let offset = 0; offset < brushSize; offset++) {\n          for (let i = -offset; i <= offset; i++) {\n            const points = [{\n              x: centerX + i,\n              y: centerY - (brushSize - 1 - offset)\n            }, {\n              x: centerX + i,\n              y: centerY + (brushSize - 1 - offset)\n            }, {\n              x: centerX - (brushSize - 1 - offset),\n              y: centerY + i\n            }, {\n              x: centerX + (brushSize - 1 - offset),\n              y: centerY + i\n            }];\n            points.forEach(point => {\n              if (point.x >= 0 && point.x < 128 && point.y >= 0 && point.y < 64) {\n                const newIdx = point.y * 128 + point.x;\n                pointsToDraw.push(newIdx);\n              }\n            });\n          }\n        }\n      });\n      onPixelUpdate(prev => {\n        const newPixels = [...prev];\n        pointsToDraw.forEach(idx => {\n          newPixels[idx] = true;\n        });\n        return newPixels;\n      });\n    }\n    return currentPoint;\n  };\n  return {\n    handleDraw,\n    modeName: 'Freeform Mode',\n    isActive\n  };\n};\n_c = FreeformMode;\nexport default FreeformMode;\nvar _c;\n$RefreshReg$(_c, \"FreeformMode\");","map":{"version":3,"names":["React","getCoordinates","drawLine","FreeformMode","isActive","onPixelUpdate","brushSize","handleDraw","lastPoint","currentIndex","currentPoint","pointsToDraw","forEach","idx","push","centerX","centerY","Math","floor","offset","i","points","x","y","point","newIdx","prev","newPixels","modeName","_c","$RefreshReg$"],"sources":["C:/Users/wikx3/Documents/VS_code/React/AOD/src/components/pixelGrid/FreeFormMode.jsx"],"sourcesContent":["import React from 'react';\r\nimport { getCoordinates, drawLine } from './utils';\r\n\r\nconst FreeformMode = ({ isActive, onPixelUpdate, brushSize }) => {\r\n  const handleDraw = (lastPoint, currentIndex) => {\r\n    const currentPoint = getCoordinates(currentIndex);\r\n    if (lastPoint) {\r\n      // Instead of updating pixels directly, return the points to draw\r\n      const pointsToDraw = [];\r\n      drawLine(lastPoint, currentPoint).forEach(idx => {\r\n        pointsToDraw.push(idx);\r\n        \r\n        const centerX = idx % 128;\r\n        const centerY = Math.floor(idx / 128);\r\n        \r\n        // Diamond pattern\r\n        for (let offset = 0; offset < brushSize; offset++) {\r\n          for (let i = -offset; i <= offset; i++) {\r\n            const points = [\r\n              { x: centerX + i, y: centerY - (brushSize - 1 - offset) },\r\n              { x: centerX + i, y: centerY + (brushSize - 1 - offset) },\r\n              { x: centerX - (brushSize - 1 - offset), y: centerY + i },\r\n              { x: centerX + (brushSize - 1 - offset), y: centerY + i }\r\n            ];\r\n\r\n            points.forEach(point => {\r\n              if (point.x >= 0 && point.x < 128 && point.y >= 0 && point.y < 64) {\r\n                const newIdx = point.y * 128 + point.x;\r\n                pointsToDraw.push(newIdx);\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      onPixelUpdate(prev => {\r\n        const newPixels = [...prev];\r\n        pointsToDraw.forEach(idx => {\r\n          newPixels[idx] = true;\r\n        });\r\n        return newPixels;\r\n      });\r\n    }\r\n    return currentPoint;\r\n  };\r\n\r\n  return {\r\n    handleDraw,\r\n    modeName: 'Freeform Mode',\r\n    isActive\r\n  };\r\n};\r\n\r\nexport default FreeformMode;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,EAAEC,QAAQ,QAAQ,SAAS;AAElD,MAAMC,YAAY,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,aAAa;EAAEC;AAAU,CAAC,KAAK;EAC/D,MAAMC,UAAU,GAAGA,CAACC,SAAS,EAAEC,YAAY,KAAK;IAC9C,MAAMC,YAAY,GAAGT,cAAc,CAACQ,YAAY,CAAC;IACjD,IAAID,SAAS,EAAE;MACb;MACA,MAAMG,YAAY,GAAG,EAAE;MACvBT,QAAQ,CAACM,SAAS,EAAEE,YAAY,CAAC,CAACE,OAAO,CAACC,GAAG,IAAI;QAC/CF,YAAY,CAACG,IAAI,CAACD,GAAG,CAAC;QAEtB,MAAME,OAAO,GAAGF,GAAG,GAAG,GAAG;QACzB,MAAMG,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACL,GAAG,GAAG,GAAG,CAAC;;QAErC;QACA,KAAK,IAAIM,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGb,SAAS,EAAEa,MAAM,EAAE,EAAE;UACjD,KAAK,IAAIC,CAAC,GAAG,CAACD,MAAM,EAAEC,CAAC,IAAID,MAAM,EAAEC,CAAC,EAAE,EAAE;YACtC,MAAMC,MAAM,GAAG,CACb;cAAEC,CAAC,EAAEP,OAAO,GAAGK,CAAC;cAAEG,CAAC,EAAEP,OAAO,IAAIV,SAAS,GAAG,CAAC,GAAGa,MAAM;YAAE,CAAC,EACzD;cAAEG,CAAC,EAAEP,OAAO,GAAGK,CAAC;cAAEG,CAAC,EAAEP,OAAO,IAAIV,SAAS,GAAG,CAAC,GAAGa,MAAM;YAAE,CAAC,EACzD;cAAEG,CAAC,EAAEP,OAAO,IAAIT,SAAS,GAAG,CAAC,GAAGa,MAAM,CAAC;cAAEI,CAAC,EAAEP,OAAO,GAAGI;YAAE,CAAC,EACzD;cAAEE,CAAC,EAAEP,OAAO,IAAIT,SAAS,GAAG,CAAC,GAAGa,MAAM,CAAC;cAAEI,CAAC,EAAEP,OAAO,GAAGI;YAAE,CAAC,CAC1D;YAEDC,MAAM,CAACT,OAAO,CAACY,KAAK,IAAI;cACtB,IAAIA,KAAK,CAACF,CAAC,IAAI,CAAC,IAAIE,KAAK,CAACF,CAAC,GAAG,GAAG,IAAIE,KAAK,CAACD,CAAC,IAAI,CAAC,IAAIC,KAAK,CAACD,CAAC,GAAG,EAAE,EAAE;gBACjE,MAAME,MAAM,GAAGD,KAAK,CAACD,CAAC,GAAG,GAAG,GAAGC,KAAK,CAACF,CAAC;gBACtCX,YAAY,CAACG,IAAI,CAACW,MAAM,CAAC;cAC3B;YACF,CAAC,CAAC;UACJ;QACF;MACF,CAAC,CAAC;MAEFpB,aAAa,CAACqB,IAAI,IAAI;QACpB,MAAMC,SAAS,GAAG,CAAC,GAAGD,IAAI,CAAC;QAC3Bf,YAAY,CAACC,OAAO,CAACC,GAAG,IAAI;UAC1Bc,SAAS,CAACd,GAAG,CAAC,GAAG,IAAI;QACvB,CAAC,CAAC;QACF,OAAOc,SAAS;MAClB,CAAC,CAAC;IACJ;IACA,OAAOjB,YAAY;EACrB,CAAC;EAED,OAAO;IACLH,UAAU;IACVqB,QAAQ,EAAE,eAAe;IACzBxB;EACF,CAAC;AACH,CAAC;AAACyB,EAAA,GAhDI1B,YAAY;AAkDlB,eAAeA,YAAY;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}